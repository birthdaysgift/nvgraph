Glossary:
    "RC" stands for [r]egular [c]ommit
    "MC" stands for [m]erge [c]ommit
    "CC" stands for [c]urrent [c]ommit
    "BC" stands for [b]ranch commit (commit where one or branches were started)
    "find_column()" should find leftmost available column
    "free_column(col)" frees column so it can be get via next call of find_column()
    "case" statement which evaluates its condition
           and prevents other cases to be executed
           once first is evaluated as True


CC.is_BC = (MC in CC.children) and (CC == MC.left_parent) and (RC in CC.children)
CC.is_MC = (len(CC.parents) == 2)
CC.is_RC = not CC.is_MC


case (CC.children == []):
    CC.col = columns.find_column()


case (MC in CC.children):

    if (CC == MC.right_parent):

        case (RC in CC.children):
            CC.col = RC.col  # TODO: CC.children can contain several RCs, which one to choose? leftmost?

        case (RC not in CC.children):
            CC.col = columns.find_column()

    if (CC == MC.left_parent):
        CC.col = MC.col

        if CC.is_BC:
            for RC in CC.children:
                columns.free_column(RC.col)


case (RC in CC.children):
    CC.col = RC.col


--------

columns contain hashes (or None, if column is available)

register_column():
- search columns from left to right to match (CC.hash in column[hash].parents)
- if hash isn't found - choose leftmost available
- if hash is found
    - if child is RC - use its column
    - if child is MC and CC.hash = MC.left_parent - use its column
    - if child is MC and CC.hash = MC.right_parent - choose leftmost avaiable

free_columns():
- go over CC.children
- if child.hash occupies column
    and CC.hash is the only parent of child
    then that's where child branch were started of
    so we can free this column, for other commits below


